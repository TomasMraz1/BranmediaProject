{"ast":null,"code":"import React,{useState,useEffect}from'react';import Sidebar from'./Sidebar';import'./Reservations.css';import socket from'../utils/socket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Reservations=_ref=>{let{onLogout}=_ref;const[reservations,setReservations]=useState([]);useEffect(()=>{// Fetch initial reservations\nconst fetchReservations=async()=>{try{const response=await fetch('https://branmedia.onrender.com/api/reservations',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();setReservations(data);console.log('Fetched initial reservations:',data);}catch(error){console.error('Error fetching reservations:',error);}};fetchReservations();// Listen for real-time reservations updates\nsocket.on('reservationsUpdate',updatedReservations=>{console.log('Received reservations update:',updatedReservations);setReservations(updatedReservations);});return()=>{socket.off('reservationsUpdate');// Cleanup socket listener\n};},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Sidebar,{onLogout:onLogout}),/*#__PURE__*/_jsxs(\"div\",{className:\"reservations-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Reservations\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"reservations-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reserved By\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created By\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Valid Until\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created At\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Updated At\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:reservations.map(reservation=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:reservation.id}),/*#__PURE__*/_jsx(\"td\",{children:reservation.reserved_by}),/*#__PURE__*/_jsx(\"td\",{children:reservation.created_by}),/*#__PURE__*/_jsx(\"td\",{children:new Date(reservation.valid_until).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:new Date(reservation.created_at).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:new Date(reservation.updated_at).toLocaleString()})]},reservation.id))})]})]})]});};export default Reservations;","map":{"version":3,"names":["React","useState","useEffect","Sidebar","socket","jsx","_jsx","jsxs","_jsxs","Reservations","_ref","onLogout","reservations","setReservations","fetchReservations","response","fetch","headers","Authorization","concat","localStorage","getItem","data","json","console","log","error","on","updatedReservations","off","style","display","children","className","map","reservation","id","reserved_by","created_by","Date","valid_until","toLocaleString","created_at","updated_at"],"sources":["C:/Users/Tomas Mraz/Desktop/Branmedia/frontend/src/components/Reservations.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Sidebar from './Sidebar';\r\nimport './Reservations.css';\r\nimport socket from '../utils/socket';\r\n\r\nconst Reservations = ({ onLogout }) => {\r\n    const [reservations, setReservations] = useState([]);\r\n\r\n    useEffect(() => {\r\n        // Fetch initial reservations\r\n        const fetchReservations = async () => {\r\n            try {\r\n                const response = await fetch('https://branmedia.onrender.com/api/reservations', {\r\n                    headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\r\n                });\r\n                const data = await response.json();\r\n                setReservations(data);\r\n                console.log('Fetched initial reservations:', data);\r\n            } catch (error) {\r\n                console.error('Error fetching reservations:', error);\r\n            }\r\n        };\r\n\r\n        fetchReservations();\r\n\r\n        // Listen for real-time reservations updates\r\n        socket.on('reservationsUpdate', (updatedReservations) => {\r\n            console.log('Received reservations update:', updatedReservations);\r\n            setReservations(updatedReservations);\r\n        });\r\n\r\n        return () => {\r\n            socket.off('reservationsUpdate'); // Cleanup socket listener\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ display: 'flex' }}>\r\n            <Sidebar onLogout={onLogout} />\r\n            <div className=\"reservations-content\">\r\n                <h1>Reservations</h1>\r\n                <table className=\"reservations-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>Reserved By</th>\r\n                            <th>Created By</th>\r\n                            <th>Valid Until</th>\r\n                            <th>Created At</th>\r\n                            <th>Updated At</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {reservations.map((reservation) => (\r\n                            <tr key={reservation.id}>\r\n                                <td>{reservation.id}</td>\r\n                                <td>{reservation.reserved_by}</td>\r\n                                <td>{reservation.created_by}</td>\r\n                                <td>{new Date(reservation.valid_until).toLocaleString()}</td>\r\n                                <td>{new Date(reservation.created_at).toLocaleString()}</td>\r\n                                <td>{new Date(reservation.updated_at).toLocaleString()}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Reservations;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}