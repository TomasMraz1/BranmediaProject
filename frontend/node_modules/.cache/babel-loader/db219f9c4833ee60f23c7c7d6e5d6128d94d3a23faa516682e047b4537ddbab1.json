{"ast":null,"code":"import React,{useState,useEffect}from'react';import Sidebar from'./Sidebar';import'./Billboards.css';import socket from'../utils/socket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Billboards=_ref=>{let{onLogout}=_ref;const[billboards,setBillboards]=useState([]);useEffect(()=>{// Fetch initial billboards\nconst fetchBillboards=async()=>{try{const response=await fetch('https://branmedia.onrender.com/api/billboards',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();setBillboards(data);console.log('Fetched initial billboards:',data);}catch(error){console.error('Error fetching billboards:',error);}};fetchBillboards();// Listen for real-time billboards updates\nsocket.on('billboardsUpdate',updatedBillboards=>{console.log('Received billboards update:',updatedBillboards);setBillboards(updatedBillboards);});return()=>{socket.off('billboardsUpdate');// Cleanup socket listener\n};},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Sidebar,{onLogout:onLogout}),/*#__PURE__*/_jsxs(\"div\",{className:\"billboards-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Billboards\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"billboards-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"City\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price Monthly\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:billboards.map(billboard=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:billboard.id}),/*#__PURE__*/_jsx(\"td\",{children:billboard.name}),/*#__PURE__*/_jsx(\"td\",{children:billboard.city}),/*#__PURE__*/_jsx(\"td\",{children:billboard.type}),/*#__PURE__*/_jsx(\"td\",{children:billboard.price_monthly}),/*#__PURE__*/_jsx(\"td\",{children:billboard.status})]},billboard.id))})]})]})]});};export default Billboards;","map":{"version":3,"names":["React","useState","useEffect","Sidebar","socket","jsx","_jsx","jsxs","_jsxs","Billboards","_ref","onLogout","billboards","setBillboards","fetchBillboards","response","fetch","headers","Authorization","concat","localStorage","getItem","data","json","console","log","error","on","updatedBillboards","off","style","display","children","className","map","billboard","id","name","city","type","price_monthly","status"],"sources":["C:/Users/Tomas Mraz/Desktop/Branmedia/frontend/src/components/Billboards.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Sidebar from './Sidebar';\r\nimport './Billboards.css';\r\nimport socket from '../utils/socket';\r\n\r\nconst Billboards = ({ onLogout }) => {\r\n    const [billboards, setBillboards] = useState([]);\r\n\r\n    useEffect(() => {\r\n        // Fetch initial billboards\r\n        const fetchBillboards = async () => {\r\n            try {\r\n                const response = await fetch('https://branmedia.onrender.com/api/billboards', {\r\n                    headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\r\n                });\r\n                const data = await response.json();\r\n                setBillboards(data);\r\n                console.log('Fetched initial billboards:', data);\r\n            } catch (error) {\r\n                console.error('Error fetching billboards:', error);\r\n            }\r\n        };\r\n\r\n        fetchBillboards();\r\n\r\n        // Listen for real-time billboards updates\r\n        socket.on('billboardsUpdate', (updatedBillboards) => {\r\n            console.log('Received billboards update:', updatedBillboards);\r\n            setBillboards(updatedBillboards);\r\n        });\r\n\r\n        return () => {\r\n            socket.off('billboardsUpdate'); // Cleanup socket listener\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ display: 'flex' }}>\r\n            <Sidebar onLogout={onLogout} />\r\n            <div className=\"billboards-content\">\r\n                <h1>Billboards</h1>\r\n                <table className=\"billboards-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>Name</th>\r\n                            <th>City</th>\r\n                            <th>Type</th>\r\n                            <th>Price Monthly</th>\r\n                            <th>Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {billboards.map((billboard) => (\r\n                            <tr key={billboard.id}>\r\n                                <td>{billboard.id}</td>\r\n                                <td>{billboard.name}</td>\r\n                                <td>{billboard.city}</td>\r\n                                <td>{billboard.type}</td>\r\n                                <td>{billboard.price_monthly}</td>\r\n                                <td>{billboard.status}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Billboards;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,kBAAkB,CACzB,MAAO,CAAAC,MAAM,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErC,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC5B,KAAM,CAACE,UAAU,CAAEC,aAAa,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACZ;AACA,KAAM,CAAAY,eAAe,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,+CAA+C,CAAE,CAC1EC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAG,CACxE,CAAC,CAAC,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClCV,aAAa,CAACS,IAAI,CAAC,CACnBE,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEH,IAAI,CAAC,CACpD,CAAE,MAAOI,KAAK,CAAE,CACZF,OAAO,CAACE,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACtD,CACJ,CAAC,CAEDZ,eAAe,CAAC,CAAC,CAEjB;AACAV,MAAM,CAACuB,EAAE,CAAC,kBAAkB,CAAGC,iBAAiB,EAAK,CACjDJ,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEG,iBAAiB,CAAC,CAC7Df,aAAa,CAACe,iBAAiB,CAAC,CACpC,CAAC,CAAC,CAEF,MAAO,IAAM,CACTxB,MAAM,CAACyB,GAAG,CAAC,kBAAkB,CAAC,CAAE;AACpC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,mBACIrB,KAAA,QAAKsB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,eAC5B1B,IAAA,CAACH,OAAO,EAACQ,QAAQ,CAAEA,QAAS,CAAE,CAAC,cAC/BH,KAAA,QAAKyB,SAAS,CAAC,oBAAoB,CAAAD,QAAA,eAC/B1B,IAAA,OAAA0B,QAAA,CAAI,YAAU,CAAI,CAAC,cACnBxB,KAAA,UAAOyB,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/B1B,IAAA,UAAA0B,QAAA,cACIxB,KAAA,OAAAwB,QAAA,eACI1B,IAAA,OAAA0B,QAAA,CAAI,IAAE,CAAI,CAAC,cACX1B,IAAA,OAAA0B,QAAA,CAAI,MAAI,CAAI,CAAC,cACb1B,IAAA,OAAA0B,QAAA,CAAI,MAAI,CAAI,CAAC,cACb1B,IAAA,OAAA0B,QAAA,CAAI,MAAI,CAAI,CAAC,cACb1B,IAAA,OAAA0B,QAAA,CAAI,eAAa,CAAI,CAAC,cACtB1B,IAAA,OAAA0B,QAAA,CAAI,QAAM,CAAI,CAAC,EACf,CAAC,CACF,CAAC,cACR1B,IAAA,UAAA0B,QAAA,CACKpB,UAAU,CAACsB,GAAG,CAAEC,SAAS,eACtB3B,KAAA,OAAAwB,QAAA,eACI1B,IAAA,OAAA0B,QAAA,CAAKG,SAAS,CAACC,EAAE,CAAK,CAAC,cACvB9B,IAAA,OAAA0B,QAAA,CAAKG,SAAS,CAACE,IAAI,CAAK,CAAC,cACzB/B,IAAA,OAAA0B,QAAA,CAAKG,SAAS,CAACG,IAAI,CAAK,CAAC,cACzBhC,IAAA,OAAA0B,QAAA,CAAKG,SAAS,CAACI,IAAI,CAAK,CAAC,cACzBjC,IAAA,OAAA0B,QAAA,CAAKG,SAAS,CAACK,aAAa,CAAK,CAAC,cAClClC,IAAA,OAAA0B,QAAA,CAAKG,SAAS,CAACM,MAAM,CAAK,CAAC,GANtBN,SAAS,CAACC,EAOf,CACP,CAAC,CACC,CAAC,EACL,CAAC,EACP,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAA3B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}