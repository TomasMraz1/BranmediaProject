{"ast":null,"code":"import React,{useEffect,useState}from'react';import Sidebar from'./Sidebar';import'./Dashboard.css';import socket from'../utils/socket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=_ref=>{let{onLogout}=_ref;const[analytics,setAnalytics]=useState({totalBillboards:0,totalOrders:0,totalReservations:0,totalUsers:0});useEffect(()=>{// Fetch initial analytics\nconst fetchAnalytics=async()=>{try{const response=await fetch('http://localhost:3000/api/analytics',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();setAnalytics(data);console.log('Fetched analytics:',data);}catch(error){console.error('Error fetching analytics:',error);}};fetchAnalytics();// Listen for real-time analytics updates\nsocket.on('dashboardAnalyticsUpdate',updatedAnalytics=>{console.log('Received analytics update:',updatedAnalytics);setAnalytics(updatedAnalytics);});return()=>{socket.off('dashboardAnalyticsUpdate');// Cleanup socket listener\n};},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Sidebar,{onLogout:onLogout}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Billboards\"}),/*#__PURE__*/_jsx(\"p\",{children:analytics.totalBillboards})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Orders\"}),/*#__PURE__*/_jsx(\"p\",{children:analytics.totalOrders})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Reservations\"}),/*#__PURE__*/_jsx(\"p\",{children:analytics.totalReservations})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Users\"}),/*#__PURE__*/_jsx(\"p\",{children:analytics.totalUsers})]})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","Sidebar","socket","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","onLogout","analytics","setAnalytics","totalBillboards","totalOrders","totalReservations","totalUsers","fetchAnalytics","response","fetch","headers","Authorization","concat","localStorage","getItem","data","json","console","log","error","on","updatedAnalytics","off","style","display","children","className"],"sources":["C:/Users/Tomas Mraz/Desktop/Branmedia/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Sidebar from './Sidebar';\r\nimport './Dashboard.css';\r\nimport socket from '../utils/socket';\r\n\r\nconst Dashboard = ({ onLogout }) => {\r\n    const [analytics, setAnalytics] = useState({\r\n        totalBillboards: 0,\r\n        totalOrders: 0,\r\n        totalReservations: 0,\r\n        totalUsers: 0,\r\n    });\r\n\r\n    useEffect(() => {\r\n        // Fetch initial analytics\r\n        const fetchAnalytics = async () => {\r\n            try {\r\n                const response = await fetch('http://localhost:3000/api/analytics', {\r\n                    headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\r\n                });\r\n                const data = await response.json();\r\n                setAnalytics(data);\r\n                console.log('Fetched analytics:', data);\r\n            } catch (error) {\r\n                console.error('Error fetching analytics:', error);\r\n            }\r\n        };\r\n\r\n        fetchAnalytics();\r\n\r\n        // Listen for real-time analytics updates\r\n        socket.on('dashboardAnalyticsUpdate', (updatedAnalytics) => {\r\n            console.log('Received analytics update:', updatedAnalytics);\r\n            setAnalytics(updatedAnalytics);\r\n        });\r\n\r\n        return () => {\r\n            socket.off('dashboardAnalyticsUpdate'); // Cleanup socket listener\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ display: 'flex' }}>\r\n            <Sidebar onLogout={onLogout} />\r\n            <div className=\"dashboard-content\">\r\n                <h1>Dashboard</h1>\r\n                <div className=\"analytics-cards\">\r\n                    <div className=\"analytics-card\">\r\n                        <h3>Total Billboards</h3>\r\n                        <p>{analytics.totalBillboards}</p>\r\n                    </div>\r\n                    <div className=\"analytics-card\">\r\n                        <h3>Total Orders</h3>\r\n                        <p>{analytics.totalOrders}</p>\r\n                    </div>\r\n                    <div className=\"analytics-card\">\r\n                        <h3>Total Reservations</h3>\r\n                        <p>{analytics.totalReservations}</p>\r\n                    </div>\r\n                    <div className=\"analytics-card\">\r\n                        <h3>Total Users</h3>\r\n                        <p>{analytics.totalUsers}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}